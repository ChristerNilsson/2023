// Generated by CoffeeScript 2.7.0
// todo
// vänd på meny för svart
// formatera pgn
var arr, fullScreen, released, resize, showDialogue;

import _ from 'https://cdn.skypack.dev/lodash';

import {
  ass,
  log,
  range,
  enterFullscreen,
  signal
} from '../js/utils.js';

import {
  Board
} from '../js/board.js';

import {
  Button,
  ClockButton
} from '../js/button.js';

import {
  global
} from '../js/globals.js';

import {
  menu0
} from '../js/menus.js';

import {
  MenuButton
} from '../js/dialogue.js';

released = true; // prevention of touch bounce

arr = null;

Array.prototype.clear = function() {
  return this.length = 0;
};

window.preload = () => {
  var i, j, len, len1, letter, ref, ref1;
  ref = "rnbqkp";
  for (i = 0, len = ref.length; i < len; i++) {
    letter = ref[i];
    global.pics[letter] = loadImage('./images/b' + letter + '.png');
  }
  ref1 = "RNBQKP";
  for (j = 0, len1 = ref1.length; j < len1; j++) {
    letter = ref1[j];
    global.pics[letter] = loadImage('./images/w' + letter.toLowerCase() + '.png');
  }
  return global.audio = new Audio('shortclick.mp3');
};

fullScreen = () => {
  return enterFullscreen();
};

showDialogue = function() {
  if (global.dialogues.length > 0) {
    return (_.last(global.dialogues)).show();
  }
};

window.setup = () => {
  createCanvas(innerWidth, innerHeight);
  // global.textarea = document.createElement 'textarea'
  // textarea.style.position = 'fixed'
  // global.textarea.textContent = "PGN"
  // document.body.appendChild global.textarea
  [global.size, global.setSize] = signal(round(min(innerWidth, innerHeight) / 18));
  [global.mx, global.setMx] = signal(round((innerWidth - 8 * global.size()) / 2));
  [global.my, global.setMy] = signal(round((innerHeight - 17 * global.size()) / 2));
  console.log(navigator.userAgent);
  global.windows = 0 <= navigator.userAgent.indexOf('Windows');
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  imageMode(CENTER);
  angleMode(DEGREES);
  global.board0 = new Board(0);
  global.board1 = new Board(1);
  global.chess = new Chess();
  return resize();
};

window.draw = () => {
  var button, i, len, ref;
  background('gray');
  textSize(global.size());
  global.board0.draw();
  global.board1.draw();
  ref = global.buttons;
  for (i = 0, len = ref.length; i < len; i++) {
    button = ref[i];
    button.draw();
  }
  fill("black");
  textAlign(CENTER, CENTER);
  return showDialogue();
};

window.onresize = function() {
  return resize();
};

resize = function() {
  var x0, x1, y0, y1, y2;
  global.setSize(round(innerHeight / 18));
  resizeCanvas(innerWidth, innerHeight);
  global.setMx(round((innerWidth - 8 * global.size()) / 2));
  global.setMy(round((innerHeight - 17 * global.size()) / 2));
  global.buttons = [];
  x0 = round(global.mx() / 2);
  x1 = width - x0;
  y0 = round(0.20 * height);
  y1 = round(0.50 * height);
  y2 = round(0.80 * height);
  global.buttons.push(new MenuButton(x1, y0, () => {
    if (global.paused && global.dialogues.length === 0) {
      return menu0();
    }
  }));
  global.buttons.push(new MenuButton(x0, y2, () => {
    if (global.paused && global.dialogues.length === 0) {
      return menu0();
    }
  }));
  global.board0.resize();
  return global.board1.resize();
};

window.mousePressed = () => {
  var button, i, j, k, l, len, len1, len2, len3, ref, ref1, ref2, ref3, square;
  if (!released) {
    return;
  }
  released = false;
  if (global.dialogues.length > 0) {
    (_.last(global.dialogues)).execute(mouseX, mouseY);
    return false;
  }
  ref = global.buttons;
  for (i = 0, len = ref.length; i < len; i++) {
    button = ref[i];
    if (button.inside(mouseX, mouseY)) {
      button.onclick();
      return false;
    }
  }
  ref1 = global.board0.squares.concat(global.board1.squares);
  for (j = 0, len1 = ref1.length; j < len1; j++) {
    square = ref1[j];
    if (square.inside(mouseX, mouseY)) {
      square.onclick();
      return false;
    }
  }
  ref2 = global.board0.buttons;
  for (k = 0, len2 = ref2.length; k < len2; k++) {
    button = ref2[k];
    if (button.inside(mouseX, mouseY)) {
      button.onclick();
      return false;
    }
  }
  ref3 = global.board1.buttons;
  for (l = 0, len3 = ref3.length; l < len3; l++) {
    button = ref3[l];
    if (button.inside(mouseX, mouseY)) {
      button.onclick();
      return false;
    }
  }
  return false;
};

window.mouseReleased = () => {
  released = true;
  return false;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uXFwiLCJzb3VyY2VzIjpbImNvZmZlZVxcc2tldGNoLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBRWU7OztBQUFBLElBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxRQUFBLEVBQUEsTUFBQSxFQUFBOztBQUVmLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQUE7RUFBUSxHQUFSO0VBQVksR0FBWjtFQUFnQixLQUFoQjtFQUFzQixlQUF0QjtFQUFzQyxNQUF0QztDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLEtBQVI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxNQUFSO0VBQWUsV0FBZjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLE1BQVI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxLQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsVUFBUjtDQUFBLE1BQUE7O0FBRUEsUUFBQSxHQUFXLEtBVkk7O0FBV2YsR0FBQSxHQUFNOztBQUNOLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBaEIsR0FBd0IsUUFBQSxDQUFBLENBQUE7U0FBRyxJQUFDLENBQUEsTUFBRCxHQUFVO0FBQWI7O0FBRXhCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLENBQUEsQ0FBQSxHQUFBO0FBQ2pCLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQztFQUFBLEtBQUEscUNBQUE7O0lBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFELENBQVgsR0FBc0IsU0FBQSxDQUFVLFlBQUEsR0FBZSxNQUFmLEdBQXdCLE1BQWxDO0VBRHZCO0FBRUE7RUFBQSxLQUFBLHdDQUFBOztJQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBRCxDQUFYLEdBQXNCLFNBQUEsQ0FBVSxZQUFBLEdBQWUsTUFBTSxDQUFDLFdBQVAsQ0FBQSxDQUFmLEdBQXNDLE1BQWhEO0VBRHZCO1NB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IyB0b2RvXHJcbiMgdsOkbmQgcMOlIG1lbnkgZsO2ciBzdmFydFxyXG4jIGZvcm1hdGVyYSBwZ25cclxuXHJcbmltcG9ydCBfIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2xvZGFzaCdcclxuaW1wb3J0IHthc3MsbG9nLHJhbmdlLGVudGVyRnVsbHNjcmVlbixzaWduYWx9IGZyb20gJy4uL2pzL3V0aWxzLmpzJ1xyXG5pbXBvcnQge0JvYXJkfSBmcm9tICcuLi9qcy9ib2FyZC5qcydcclxuaW1wb3J0IHtCdXR0b24sQ2xvY2tCdXR0b259IGZyb20gJy4uL2pzL2J1dHRvbi5qcydcclxuaW1wb3J0IHtnbG9iYWx9IGZyb20gJy4uL2pzL2dsb2JhbHMuanMnXHJcbmltcG9ydCB7bWVudTB9IGZyb20gJy4uL2pzL21lbnVzLmpzJ1xyXG5pbXBvcnQge01lbnVCdXR0b259IGZyb20gJy4uL2pzL2RpYWxvZ3VlLmpzJ1xyXG5cclxucmVsZWFzZWQgPSB0cnVlICMgcHJldmVudGlvbiBvZiB0b3VjaCBib3VuY2VcclxuYXJyID0gbnVsbFxyXG5BcnJheS5wcm90b3R5cGUuY2xlYXIgPSAtPiBAbGVuZ3RoID0gMFxyXG5cclxud2luZG93LnByZWxvYWQgPSA9PlxyXG5cdGZvciBsZXR0ZXIgaW4gXCJybmJxa3BcIlxyXG5cdFx0Z2xvYmFsLnBpY3NbbGV0dGVyXSA9IGxvYWRJbWFnZSAnLi9pbWFnZXMvYicgKyBsZXR0ZXIgKyAnLnBuZydcclxuXHRmb3IgbGV0dGVyIGluIFwiUk5CUUtQXCJcclxuXHRcdGdsb2JhbC5waWNzW2xldHRlcl0gPSBsb2FkSW1hZ2UgJy4vaW1hZ2VzL3cnICsgbGV0dGVyLnRvTG93ZXJDYXNlKCkgKyAnLnBuZydcclxuXHRnbG9iYWwuYXVkaW8gPSBuZXcgQXVkaW8gJ3Nob3J0Y2xpY2subXAzJ1xyXG5cclxuZnVsbFNjcmVlbiA9ID0+IGVudGVyRnVsbHNjcmVlbigpXHJcblxyXG5zaG93RGlhbG9ndWUgPSAtPiBpZiBnbG9iYWwuZGlhbG9ndWVzLmxlbmd0aCA+IDAgdGhlbiAoXy5sYXN0IGdsb2JhbC5kaWFsb2d1ZXMpLnNob3coKVxyXG5cclxud2luZG93LnNldHVwID0gPT5cclxuXHJcblx0Y3JlYXRlQ2FudmFzIGlubmVyV2lkdGgsaW5uZXJIZWlnaHRcclxuXHJcblx0IyBnbG9iYWwudGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICd0ZXh0YXJlYSdcclxuXHQjIHRleHRhcmVhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJ1xyXG5cdCMgZ2xvYmFsLnRleHRhcmVhLnRleHRDb250ZW50ID0gXCJQR05cIlxyXG5cdCMgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCBnbG9iYWwudGV4dGFyZWFcclxuXHJcblx0W2dsb2JhbC5zaXplLCBnbG9iYWwuc2V0U2l6ZV0gPSBzaWduYWwgcm91bmQgbWluKGlubmVyV2lkdGgsaW5uZXJIZWlnaHQpLzE4XHJcblx0W2dsb2JhbC5teCwgZ2xvYmFsLnNldE14XSA9IHNpZ25hbCByb3VuZCAoaW5uZXJXaWR0aCAtIDggKiBnbG9iYWwuc2l6ZSgpKS8yXHJcblx0W2dsb2JhbC5teSwgZ2xvYmFsLnNldE15XSA9IHNpZ25hbCByb3VuZCAoaW5uZXJIZWlnaHQgLSAxNyAqIGdsb2JhbC5zaXplKCkpLzJcclxuXHJcblx0Y29uc29sZS5sb2cgbmF2aWdhdG9yLnVzZXJBZ2VudFxyXG5cdGdsb2JhbC53aW5kb3dzID0gMCA8PSBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YgJ1dpbmRvd3MnXHJcblxyXG5cdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0cmVjdE1vZGUgQ0VOVEVSXHJcblx0aW1hZ2VNb2RlIENFTlRFUlxyXG5cdGFuZ2xlTW9kZSBERUdSRUVTXHJcblxyXG5cdGdsb2JhbC5ib2FyZDAgPSBuZXcgQm9hcmQgMFxyXG5cdGdsb2JhbC5ib2FyZDEgPSBuZXcgQm9hcmQgMVxyXG5cdGdsb2JhbC5jaGVzcyA9IG5ldyBDaGVzcygpXHJcblxyXG5cdHJlc2l6ZSgpXHJcblxyXG53aW5kb3cuZHJhdyA9ID0+XHJcblx0YmFja2dyb3VuZCAnZ3JheSdcclxuXHR0ZXh0U2l6ZSBnbG9iYWwuc2l6ZSgpXHJcblx0Z2xvYmFsLmJvYXJkMC5kcmF3KClcclxuXHRnbG9iYWwuYm9hcmQxLmRyYXcoKVxyXG5cdGZvciBidXR0b24gaW4gZ2xvYmFsLmJ1dHRvbnNcclxuXHRcdGJ1dHRvbi5kcmF3KClcclxuXHRmaWxsIFwiYmxhY2tcIlxyXG5cdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0c2hvd0RpYWxvZ3VlKClcclxuXHJcbndpbmRvdy5vbnJlc2l6ZSA9IC0+IHJlc2l6ZSgpXHJcblxyXG5yZXNpemUgPSAtPlxyXG5cdGdsb2JhbC5zZXRTaXplIHJvdW5kIGlubmVySGVpZ2h0LzE4XHJcblx0cmVzaXplQ2FudmFzIGlubmVyV2lkdGgsIGlubmVySGVpZ2h0XHJcblx0Z2xvYmFsLnNldE14IHJvdW5kIChpbm5lcldpZHRoIC0gOCAqIGdsb2JhbC5zaXplKCkpLzJcclxuXHRnbG9iYWwuc2V0TXkgcm91bmQgKGlubmVySGVpZ2h0IC0gMTcgKiBnbG9iYWwuc2l6ZSgpKS8yXHJcblxyXG5cdGdsb2JhbC5idXR0b25zID0gW11cclxuXHR4MCA9IHJvdW5kIGdsb2JhbC5teCgpLzJcclxuXHR4MSA9IHdpZHRoLSB4MFxyXG5cdHkwID0gcm91bmQgMC4yMCpoZWlnaHRcclxuXHR5MSA9IHJvdW5kIDAuNTAqaGVpZ2h0XHJcblx0eTIgPSByb3VuZCAwLjgwKmhlaWdodFxyXG5cclxuXHRnbG9iYWwuYnV0dG9ucy5wdXNoIG5ldyBNZW51QnV0dG9uIHgxLCB5MCwgPT5cclxuXHRcdGlmIGdsb2JhbC5wYXVzZWQgYW5kIGdsb2JhbC5kaWFsb2d1ZXMubGVuZ3RoID09IDAgdGhlbiBtZW51MCgpXHJcblxyXG5cdGdsb2JhbC5idXR0b25zLnB1c2ggbmV3IE1lbnVCdXR0b24geDAsIHkyLCA9PlxyXG5cdFx0aWYgZ2xvYmFsLnBhdXNlZCBhbmQgZ2xvYmFsLmRpYWxvZ3Vlcy5sZW5ndGggPT0gMCB0aGVuIG1lbnUwKClcclxuXHJcblx0Z2xvYmFsLmJvYXJkMC5yZXNpemUoKVxyXG5cdGdsb2JhbC5ib2FyZDEucmVzaXplKClcclxuXHJcbndpbmRvdy5tb3VzZVByZXNzZWQgPSA9PlxyXG5cdGlmIG5vdCByZWxlYXNlZCB0aGVuIHJldHVyblxyXG5cdHJlbGVhc2VkID0gZmFsc2VcclxuXHJcblx0aWYgZ2xvYmFsLmRpYWxvZ3Vlcy5sZW5ndGggPiAwXHJcblx0XHQoXy5sYXN0IGdsb2JhbC5kaWFsb2d1ZXMpLmV4ZWN1dGUgbW91c2VYLG1vdXNlWVxyXG5cdFx0cmV0dXJuIGZhbHNlXHJcblxyXG5cdGZvciBidXR0b24gaW4gZ2xvYmFsLmJ1dHRvbnNcclxuXHRcdGlmIGJ1dHRvbi5pbnNpZGUgbW91c2VYLG1vdXNlWVxyXG5cdFx0XHRidXR0b24ub25jbGljaygpXHJcblx0XHRcdHJldHVybiBmYWxzZVxyXG5cclxuXHRmb3Igc3F1YXJlIGluIGdsb2JhbC5ib2FyZDAuc3F1YXJlcy5jb25jYXQgZ2xvYmFsLmJvYXJkMS5zcXVhcmVzXHJcblx0XHRpZiBzcXVhcmUuaW5zaWRlIG1vdXNlWCxtb3VzZVlcclxuXHRcdFx0c3F1YXJlLm9uY2xpY2soKVxyXG5cdFx0XHRyZXR1cm4gZmFsc2VcclxuXHJcblx0Zm9yIGJ1dHRvbiBpbiBnbG9iYWwuYm9hcmQwLmJ1dHRvbnNcclxuXHRcdGlmIGJ1dHRvbi5pbnNpZGUgbW91c2VYLG1vdXNlWVxyXG5cdFx0XHRidXR0b24ub25jbGljaygpXHJcblx0XHRcdHJldHVybiBmYWxzZVxyXG5cclxuXHRmb3IgYnV0dG9uIGluIGdsb2JhbC5ib2FyZDEuYnV0dG9uc1xyXG5cdFx0aWYgYnV0dG9uLmluc2lkZSBtb3VzZVgsbW91c2VZXHJcblx0XHRcdGJ1dHRvbi5vbmNsaWNrKClcclxuXHRcdFx0cmV0dXJuIGZhbHNlXHJcblxyXG5cdGZhbHNlXHJcblx0XHJcbndpbmRvdy5tb3VzZVJlbGVhc2VkID0gPT5cclxuXHRyZWxlYXNlZCA9IHRydWVcclxuXHRmYWxzZVxyXG4iXX0=
//# sourceURL=c:\github\2023\026-chessx2\coffee\sketch.coffee