// Generated by CoffeeScript 2.7.0
// todo
// vänd på meny för svart
// formatera pgn
var arr, fullScreen, released, resize, showDialogue;

import _ from 'https://cdn.skypack.dev/lodash';

import {
  ass,
  log,
  range,
  enterFullscreen,
  signal
} from '../js/utils.js';

import {
  Board
} from '../js/board.js';

import {
  Button,
  ClockButton
} from '../js/button.js';

import {
  global
} from '../js/globals.js';

import {
  menu0
} from '../js/menus.js';

import {
  MenuButton
} from '../js/dialogue.js';

released = true; // prevention of touch bounce

arr = null;

Array.prototype.clear = function() {
  return this.length = 0;
};

window.preload = () => {
  var i, j, len, len1, letter, ref, ref1;
  ref = "rnbqkp";
  for (i = 0, len = ref.length; i < len; i++) {
    letter = ref[i];
    global.pics[letter] = loadImage('./images/b' + letter + '.png');
  }
  ref1 = "RNBQKP";
  for (j = 0, len1 = ref1.length; j < len1; j++) {
    letter = ref1[j];
    global.pics[letter] = loadImage('./images/w' + letter.toLowerCase() + '.png');
  }
  return global.audio = new Audio('shortclick.mp3');
};

fullScreen = () => {
  return enterFullscreen();
};

showDialogue = function() {
  if (global.dialogues.length > 0) {
    return (_.last(global.dialogues)).show();
  }
};

window.setup = () => {
  var button;
  // createCanvas innerWidth,innerHeight
  button = document.getElementById('analyze');
  button.addEventListener('click', function() {
    
    // textarea = document.getElementById 'pgn'
    // textarea.hidden = false
    return global.copyPGNToClipboard();
  });
  // textarea.value = global.chess.pgn()
  // textarea.select()
  // console.log textarea
  // document.execCommand 'copy'
  // textarea.blur()
  [global.size, global.setSize] = signal(round(min(innerWidth, innerHeight) / 18));
  [global.mx, global.setMx] = signal(round((innerWidth - 8 * global.size()) / 2));
  [global.my, global.setMy] = signal(round((innerHeight - 17 * global.size()) / 2));
  console.log(navigator.userAgent);
  global.windows = 0 <= navigator.userAgent.indexOf('Windows');
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  imageMode(CENTER);
  angleMode(DEGREES);
  global.board0 = new Board(0);
  global.board1 = new Board(1);
  global.chess = new Chess();
  return resize();
};

window.draw = () => {
  var button, i, len, ref;
  background('gray');
  textSize(global.size());
  global.board0.draw();
  global.board1.draw();
  ref = global.buttons;
  for (i = 0, len = ref.length; i < len; i++) {
    button = ref[i];
    button.draw();
  }
  fill("black");
  textAlign(CENTER, CENTER);
  return showDialogue();
};

window.onresize = function() {
  return resize();
};

resize = function() {
  var x0, x1, y0, y1, y2;
  global.setSize(round(innerHeight / 18));
  resizeCanvas(innerWidth, innerHeight);
  global.setMx(round((innerWidth - 8 * global.size()) / 2));
  global.setMy(round((innerHeight - 17 * global.size()) / 2));
  global.buttons = [];
  x0 = round(global.mx() / 2);
  x1 = width - x0;
  y0 = round(0.20 * height);
  y1 = round(0.50 * height);
  y2 = round(0.80 * height);
  global.buttons.push(new MenuButton(x1, y0, () => {
    if (global.paused && global.dialogues.length === 0) {
      return menu0();
    }
  }));
  global.buttons.push(new MenuButton(x0, y2, () => {
    if (global.paused && global.dialogues.length === 0) {
      return menu0();
    }
  }));
  global.board0.resize();
  return global.board1.resize();
};

window.mousePressed = () => {
  var button, i, j, k, l, len, len1, len2, len3, ref, ref1, ref2, ref3, square;
  if (!released) {
    return;
  }
  released = false;
  if (global.dialogues.length > 0) {
    (_.last(global.dialogues)).execute(mouseX, mouseY);
    return false;
  }
  ref = global.buttons;
  for (i = 0, len = ref.length; i < len; i++) {
    button = ref[i];
    if (button.inside(mouseX, mouseY)) {
      button.onclick();
      return false;
    }
  }
  ref1 = global.board0.squares.concat(global.board1.squares);
  for (j = 0, len1 = ref1.length; j < len1; j++) {
    square = ref1[j];
    if (square.inside(mouseX, mouseY)) {
      square.onclick();
      return false;
    }
  }
  ref2 = global.board0.buttons;
  for (k = 0, len2 = ref2.length; k < len2; k++) {
    button = ref2[k];
    if (button.inside(mouseX, mouseY)) {
      button.onclick();
      return false;
    }
  }
  ref3 = global.board1.buttons;
  for (l = 0, len3 = ref3.length; l < len3; l++) {
    button = ref3[l];
    if (button.inside(mouseX, mouseY)) {
      button.onclick();
      return false;
    }
  }
  return false;
};

window.mouseReleased = () => {
  released = true;
  return false;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uXFwiLCJzb3VyY2VzIjpbImNvZmZlZVxcc2tldGNoLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBRWU7OztBQUFBLElBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxRQUFBLEVBQUEsTUFBQSxFQUFBOztBQUVmLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQUE7RUFBUSxHQUFSO0VBQVksR0FBWjtFQUFnQixLQUFoQjtFQUFzQixlQUF0QjtFQUFzQyxNQUF0QztDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLEtBQVI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxNQUFSO0VBQWUsV0FBZjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLE1BQVI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxLQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsVUFBUjtDQUFBLE1BQUE7O0FBRUEsUUFBQSxHQUFXLEtBVkk7O0FBV2YsR0FBQSxHQUFNOztBQUNOLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBaEIsR0FBd0IsUUFBQSxDQUFBLENBQUE7U0FBRyxJQUFDLENBQUEsTUFBRCxHQUFVO0FBQWI7O0FBRXhCLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLENBQUEsQ0FBQSxHQUFBO0FBQ2pCLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUE7QUFBQztFQUFBLEtBQUEscUNBQUE7O0lBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFELENBQVgsR0FBc0IsU0FBQSxDQUFVLFlBQUEsR0FBZSxNQUFmLEdBQXdCLE1BQWxDO0VBRHZCO0FBRUE7RUFBQSxLQUFBLHdDQUFBOztJQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBRCxDQUFYLEdBQXNCLFNBQUEsQ0FBVSxZQUFBLEdBQWUsTUFBTSxDQUFDLFdBQVAsQ0FBQSxDQUFmLEdBQXNDLE1BQWhEO0VBRHZCO1NB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QUFBO0FBQ0EsYUFBTyxNQUZSOztFQUREO1NBS0E7QUE1QnFCOztBQThCdEIsTUFBTSxDQUFDLGFBQVAsR0FBdUIsQ0FBQSxDQUFBLEdBQUE7RUFDdEIsUUFBQSxHQUFXO1NBQ1g7QUFGc0IiLCJzb3VyY2VzQ29udGVudCI6WyIjIHRvZG9cclxuIyB2w6RuZCBww6UgbWVueSBmw7ZyIHN2YXJ0XHJcbiMgZm9ybWF0ZXJhIHBnblxyXG5cclxuaW1wb3J0IF8gZnJvbSAnaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvbG9kYXNoJ1xyXG5pbXBvcnQge2Fzcyxsb2cscmFuZ2UsZW50ZXJGdWxsc2NyZWVuLHNpZ25hbH0gZnJvbSAnLi4vanMvdXRpbHMuanMnXHJcbmltcG9ydCB7Qm9hcmR9IGZyb20gJy4uL2pzL2JvYXJkLmpzJ1xyXG5pbXBvcnQge0J1dHRvbixDbG9ja0J1dHRvbn0gZnJvbSAnLi4vanMvYnV0dG9uLmpzJ1xyXG5pbXBvcnQge2dsb2JhbH0gZnJvbSAnLi4vanMvZ2xvYmFscy5qcydcclxuaW1wb3J0IHttZW51MH0gZnJvbSAnLi4vanMvbWVudXMuanMnXHJcbmltcG9ydCB7TWVudUJ1dHRvbn0gZnJvbSAnLi4vanMvZGlhbG9ndWUuanMnXHJcblxyXG5yZWxlYXNlZCA9IHRydWUgIyBwcmV2ZW50aW9uIG9mIHRvdWNoIGJvdW5jZVxyXG5hcnIgPSBudWxsXHJcbkFycmF5LnByb3RvdHlwZS5jbGVhciA9IC0+IEBsZW5ndGggPSAwXHJcblxyXG53aW5kb3cucHJlbG9hZCA9ID0+XHJcblx0Zm9yIGxldHRlciBpbiBcInJuYnFrcFwiXHJcblx0XHRnbG9iYWwucGljc1tsZXR0ZXJdID0gbG9hZEltYWdlICcuL2ltYWdlcy9iJyArIGxldHRlciArICcucG5nJ1xyXG5cdGZvciBsZXR0ZXIgaW4gXCJSTkJRS1BcIlxyXG5cdFx0Z2xvYmFsLnBpY3NbbGV0dGVyXSA9IGxvYWRJbWFnZSAnLi9pbWFnZXMvdycgKyBsZXR0ZXIudG9Mb3dlckNhc2UoKSArICcucG5nJ1xyXG5cdGdsb2JhbC5hdWRpbyA9IG5ldyBBdWRpbyAnc2hvcnRjbGljay5tcDMnXHJcblxyXG5mdWxsU2NyZWVuID0gPT4gZW50ZXJGdWxsc2NyZWVuKClcclxuXHJcbnNob3dEaWFsb2d1ZSA9IC0+IGlmIGdsb2JhbC5kaWFsb2d1ZXMubGVuZ3RoID4gMCB0aGVuIChfLmxhc3QgZ2xvYmFsLmRpYWxvZ3Vlcykuc2hvdygpXHJcblxyXG53aW5kb3cuc2V0dXAgPSA9PlxyXG5cclxuXHQjIGNyZWF0ZUNhbnZhcyBpbm5lcldpZHRoLGlubmVySGVpZ2h0XHJcblxyXG5cdGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICdhbmFseXplJ1xyXG5cdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyICdjbGljaycsICgpIC0+IFxyXG5cdFx0IyB0ZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICdwZ24nXHJcblx0XHQjIHRleHRhcmVhLmhpZGRlbiA9IGZhbHNlXHJcblx0XHRnbG9iYWwuY29weVBHTlRvQ2xpcGJvYXJkKClcclxuXHRcdCMgdGV4dGFyZWEudmFsdWUgPSBnbG9iYWwuY2hlc3MucGduKClcclxuXHRcdCMgdGV4dGFyZWEuc2VsZWN0KClcclxuXHRcdCMgY29uc29sZS5sb2cgdGV4dGFyZWFcclxuXHRcdCMgZG9jdW1lbnQuZXhlY0NvbW1hbmQgJ2NvcHknXHJcblx0XHQjIHRleHRhcmVhLmJsdXIoKVxyXG5cclxuXHRbZ2xvYmFsLnNpemUsIGdsb2JhbC5zZXRTaXplXSA9IHNpZ25hbCByb3VuZCBtaW4oaW5uZXJXaWR0aCxpbm5lckhlaWdodCkvMThcclxuXHRbZ2xvYmFsLm14LCBnbG9iYWwuc2V0TXhdID0gc2lnbmFsIHJvdW5kIChpbm5lcldpZHRoIC0gOCAqIGdsb2JhbC5zaXplKCkpLzJcclxuXHRbZ2xvYmFsLm15LCBnbG9iYWwuc2V0TXldID0gc2lnbmFsIHJvdW5kIChpbm5lckhlaWdodCAtIDE3ICogZ2xvYmFsLnNpemUoKSkvMlxyXG5cclxuXHRjb25zb2xlLmxvZyBuYXZpZ2F0b3IudXNlckFnZW50XHJcblx0Z2xvYmFsLndpbmRvd3MgPSAwIDw9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZiAnV2luZG93cydcclxuXHJcblx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHRyZWN0TW9kZSBDRU5URVJcclxuXHRpbWFnZU1vZGUgQ0VOVEVSXHJcblx0YW5nbGVNb2RlIERFR1JFRVNcclxuXHJcblx0Z2xvYmFsLmJvYXJkMCA9IG5ldyBCb2FyZCAwXHJcblx0Z2xvYmFsLmJvYXJkMSA9IG5ldyBCb2FyZCAxXHJcblx0Z2xvYmFsLmNoZXNzID0gbmV3IENoZXNzKClcclxuXHJcblx0cmVzaXplKClcclxuXHJcbndpbmRvdy5kcmF3ID0gPT5cclxuXHRiYWNrZ3JvdW5kICdncmF5J1xyXG5cdHRleHRTaXplIGdsb2JhbC5zaXplKClcclxuXHRnbG9iYWwuYm9hcmQwLmRyYXcoKVxyXG5cdGdsb2JhbC5ib2FyZDEuZHJhdygpXHJcblx0Zm9yIGJ1dHRvbiBpbiBnbG9iYWwuYnV0dG9uc1xyXG5cdFx0YnV0dG9uLmRyYXcoKVxyXG5cdGZpbGwgXCJibGFja1wiXHJcblx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHRzaG93RGlhbG9ndWUoKVxyXG5cclxud2luZG93Lm9ucmVzaXplID0gLT4gcmVzaXplKClcclxuXHJcbnJlc2l6ZSA9IC0+XHJcblx0Z2xvYmFsLnNldFNpemUgcm91bmQgaW5uZXJIZWlnaHQvMThcclxuXHRyZXNpemVDYW52YXMgaW5uZXJXaWR0aCwgaW5uZXJIZWlnaHRcclxuXHRnbG9iYWwuc2V0TXggcm91bmQgKGlubmVyV2lkdGggLSA4ICogZ2xvYmFsLnNpemUoKSkvMlxyXG5cdGdsb2JhbC5zZXRNeSByb3VuZCAoaW5uZXJIZWlnaHQgLSAxNyAqIGdsb2JhbC5zaXplKCkpLzJcclxuXHJcblx0Z2xvYmFsLmJ1dHRvbnMgPSBbXVxyXG5cdHgwID0gcm91bmQgZ2xvYmFsLm14KCkvMlxyXG5cdHgxID0gd2lkdGgtIHgwXHJcblx0eTAgPSByb3VuZCAwLjIwKmhlaWdodFxyXG5cdHkxID0gcm91bmQgMC41MCpoZWlnaHRcclxuXHR5MiA9IHJvdW5kIDAuODAqaGVpZ2h0XHJcblxyXG5cdGdsb2JhbC5idXR0b25zLnB1c2ggbmV3IE1lbnVCdXR0b24geDEsIHkwLCA9PlxyXG5cdFx0aWYgZ2xvYmFsLnBhdXNlZCBhbmQgZ2xvYmFsLmRpYWxvZ3Vlcy5sZW5ndGggPT0gMCB0aGVuIG1lbnUwKClcclxuXHJcblx0Z2xvYmFsLmJ1dHRvbnMucHVzaCBuZXcgTWVudUJ1dHRvbiB4MCwgeTIsID0+XHJcblx0XHRpZiBnbG9iYWwucGF1c2VkIGFuZCBnbG9iYWwuZGlhbG9ndWVzLmxlbmd0aCA9PSAwIHRoZW4gbWVudTAoKVxyXG5cclxuXHRnbG9iYWwuYm9hcmQwLnJlc2l6ZSgpXHJcblx0Z2xvYmFsLmJvYXJkMS5yZXNpemUoKVxyXG5cclxud2luZG93Lm1vdXNlUHJlc3NlZCA9ID0+XHJcblx0aWYgbm90IHJlbGVhc2VkIHRoZW4gcmV0dXJuXHJcblx0cmVsZWFzZWQgPSBmYWxzZVxyXG5cclxuXHRpZiBnbG9iYWwuZGlhbG9ndWVzLmxlbmd0aCA+IDBcclxuXHRcdChfLmxhc3QgZ2xvYmFsLmRpYWxvZ3VlcykuZXhlY3V0ZSBtb3VzZVgsbW91c2VZXHJcblx0XHRyZXR1cm4gZmFsc2VcclxuXHJcblx0Zm9yIGJ1dHRvbiBpbiBnbG9iYWwuYnV0dG9uc1xyXG5cdFx0aWYgYnV0dG9uLmluc2lkZSBtb3VzZVgsbW91c2VZXHJcblx0XHRcdGJ1dHRvbi5vbmNsaWNrKClcclxuXHRcdFx0cmV0dXJuIGZhbHNlXHJcblxyXG5cdGZvciBzcXVhcmUgaW4gZ2xvYmFsLmJvYXJkMC5zcXVhcmVzLmNvbmNhdCBnbG9iYWwuYm9hcmQxLnNxdWFyZXNcclxuXHRcdGlmIHNxdWFyZS5pbnNpZGUgbW91c2VYLG1vdXNlWVxyXG5cdFx0XHRzcXVhcmUub25jbGljaygpXHJcblx0XHRcdHJldHVybiBmYWxzZVxyXG5cclxuXHRmb3IgYnV0dG9uIGluIGdsb2JhbC5ib2FyZDAuYnV0dG9uc1xyXG5cdFx0aWYgYnV0dG9uLmluc2lkZSBtb3VzZVgsbW91c2VZXHJcblx0XHRcdGJ1dHRvbi5vbmNsaWNrKClcclxuXHRcdFx0cmV0dXJuIGZhbHNlXHJcblxyXG5cdGZvciBidXR0b24gaW4gZ2xvYmFsLmJvYXJkMS5idXR0b25zXHJcblx0XHRpZiBidXR0b24uaW5zaWRlIG1vdXNlWCxtb3VzZVlcclxuXHRcdFx0YnV0dG9uLm9uY2xpY2soKVxyXG5cdFx0XHRyZXR1cm4gZmFsc2VcclxuXHJcblx0ZmFsc2VcclxuXHRcclxud2luZG93Lm1vdXNlUmVsZWFzZWQgPSA9PlxyXG5cdHJlbGVhc2VkID0gdHJ1ZVxyXG5cdGZhbHNlXHJcbiJdfQ==
//# sourceURL=c:\github\2023\026-chessx2\coffee\sketch.coffee