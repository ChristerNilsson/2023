// Generated by CoffeeScript 2.7.0
var link;

import {
  ass,
  log,
  range,
  split,
  param,
  hexToBase64,
  spaceShip
} from '../js/utils.js';

import {
  Button
} from '../js/button.js';

import _ from 'https://cdn.skypack.dev/lodash';

export var global = {
  dialogues: [], // dialogstack till menyhanteringen
  board0: null,
  board1: null,
  chess: null, // hanterar dragen samt deras legalitet
  minutes: 15,
  increment: 10, // seconds
  clocks: [
    15 * 60 + 10,
    15 * 60 + 10 // white and black in seconds. float.
  ],
  paused: true,
  version: 'ver: B',
  pics: {}, // 12 pj√§ser
  buttons: [],
  size: null, // en rutas storlek
  setSize: null,
  mx: null, // x-marginal
  setMx: null,
  my: null, // y-marginal
  setMy: null,
  textarea: null,
  copyPGNToClipboard: function() {
    var arr, i, j, len, ref, textarea;
    arr = global.chess.pgn().split(' ');
    ref = range(arr.length);
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      arr[i] += i % 3 === 2 ? "\n" : " ";
    }
    textarea = document.getElementById('pgn');
    //textarea.hidden = false
    textarea.value = arr.join('').trim();
    textarea.select();
    return document.execCommand('copy');
  }
};

//textarea.blur()
export var coords = (uci) => {
  var c0, c1, r0, r1;
  param.String(uci);
  c0 = "abcdefgh".indexOf(uci[0]);
  r0 = "12345678".indexOf(uci[1]);
  c1 = "abcdefgh".indexOf(uci[2]);
  r1 = "12345678".indexOf(uci[3]);
  return param.Array([c0 + 8 * r0, c1 + 8 * r1]);
};

ass([8, 24], coords("a2a4"));

export var toUCI = ([from, to]) => {
  var c0, c1, r0, r1;
  param.Integer(from);
  param.Integer(to);
  c0 = "abcdefgh"[from % 8];
  r0 = "12345678"[Math.floor(from / 8)];
  c1 = "abcdefgh"[to % 8];
  r1 = "12345678"[Math.floor(to / 8)];
  return param.String(c0 + r0 + c1 + r1);
};

ass("e2e4", toUCI([12, 28]));

export var toObjectNotation = ([from, to]) => {
  var uci;
  param.Integer(from);
  param.Integer(to);
  uci = toUCI([from, to]);
  from = uci.slice(0, 2);
  to = uci.slice(2, 4);
  return param.Object({from, to});
};

ass({
  from: 'e2',
  to: 'e4'
}, toObjectNotation([12, 28]));

export var empty = (n) => {
  param.Integer(n);
  return param.String((1 + Math.floor(n / 8)).toString());
};

export var dumpState = () => {
  console.log('STATE ########');
  // console.log '  stack',global.stack
  console.log('  currNode', global.currNode);
  return console.log('  history', global.chess.history());
};

link = () => {
  return 'https://lichess.org/analysis/' + global.chess.fen();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFscy5qcyIsInNvdXJjZVJvb3QiOiIuLlxcIiwic291cmNlcyI6WyJjb2ZmZWVcXGdsb2JhbHMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBOztBQUFBLE9BQUE7RUFBUSxHQUFSO0VBQVksR0FBWjtFQUFnQixLQUFoQjtFQUFzQixLQUF0QjtFQUE0QixLQUE1QjtFQUFrQyxXQUFsQztFQUE4QyxTQUE5QztDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLE1BQVI7Q0FBQSxNQUFBOztBQUNBLE9BQU8sQ0FBUCxNQUFBOztBQUVBLE9BQUEsSUFBTyxNQUFBLEdBQVM7RUFFZixTQUFBLEVBQVcsRUFGSTtFQUdmLE1BQUEsRUFBUyxJQUhNO0VBSWYsTUFBQSxFQUFTLElBSk07RUFLZixLQUFBLEVBQVEsSUFMTztFQU9mLE9BQUEsRUFBVSxFQVBLO0VBUWYsU0FBQSxFQUFZLEVBUkc7RUFTZixNQUFBLEVBQVE7SUFBQyxFQUFBLEdBQUcsRUFBSCxHQUFNLEVBQVA7SUFBVSxFQUFBLEdBQUcsRUFBSCxHQUFNLEVBQWhCO0dBVE87RUFXZixNQUFBLEVBQVMsSUFYTTtFQVlmLE9BQUEsRUFBUSxRQVpPO0VBYWYsSUFBQSxFQUFPLENBQUEsQ0FiUTtFQWNmLE9BQUEsRUFBVSxFQWRLO0VBZ0JmLElBQUEsRUFBSyxJQWhCVTtFQWlCZixPQUFBLEVBQVEsSUFqQk87RUFrQmYsRUFBQSxFQUFHLElBbEJZO0VBbUJmLEtBQUEsRUFBTSxJQW5CUztFQW9CZixFQUFBLEVBQUcsSUFwQlk7RUFxQmYsS0FBQSxFQUFNLElBckJTO0VBc0JmLFFBQUEsRUFBUyxJQXRCTTtFQXVCZixrQkFBQSxFQUFvQixRQUFBLENBQUEsQ0FBQTtBQUNyQixRQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7SUFBRSxHQUFBLEdBQU0sTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFiLENBQUEsQ0FBa0IsQ0FBQyxLQUFuQixD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S0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUFDLENBQUEsY0FBRSxJQUFHLEVBQU4sQ0FBUSxDQUFDLFFBQVQsQ0FBQSxDQUFiO0FBRmM7O0FBSWYsT0FBQSxJQUFPLFNBQUEsR0FBWSxDQUFBLENBQUEsR0FBQTtFQUNsQixPQUFPLENBQUMsR0FBUixDQUFZLGdCQUFaLEVBQUQ7O0VBRUMsT0FBTyxDQUFDLEdBQVIsQ0FBWSxZQUFaLEVBQXlCLE1BQU0sQ0FBQyxRQUFoQztTQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksV0FBWixFQUF3QixNQUFNLENBQUMsS0FBSyxDQUFDLE9BQWIsQ0FBQSxDQUF4QjtBQUprQjs7QUFNbkIsSUFBQSxHQUFPLENBQUEsQ0FBQSxHQUFBO1NBQUcsK0JBQUEsR0FBa0MsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFiLENBQUE7QUFBckMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2Fzcyxsb2cscmFuZ2Usc3BsaXQscGFyYW0saGV4VG9CYXNlNjQsc3BhY2VTaGlwfSBmcm9tICcuLi9qcy91dGlscy5qcydcclxuaW1wb3J0IHtCdXR0b259IGZyb20gJy4uL2pzL2J1dHRvbi5qcydcclxuaW1wb3J0IF8gZnJvbSAnaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvbG9kYXNoJ1xyXG5cclxuZXhwb3J0IGdsb2JhbCA9IHtcclxuXHJcblx0ZGlhbG9ndWVzOiBbXSwgIyBkaWFsb2dzdGFjayB0aWxsIG1lbnloYW50ZXJpbmdlblxyXG5cdGJvYXJkMCA6IG51bGwsXHJcblx0Ym9hcmQxIDogbnVsbCxcclxuXHRjaGVzcyA6IG51bGwsICMgaGFudGVyYXIgZHJhZ2VuIHNhbXQgZGVyYXMgbGVnYWxpdGV0XHJcblxyXG5cdG1pbnV0ZXMgOiAxNSxcclxuXHRpbmNyZW1lbnQgOiAxMCwgIyBzZWNvbmRzXHJcblx0Y2xvY2tzOiBbMTUqNjArMTAsMTUqNjArMTBdLCAjIHdoaXRlIGFuZCBibGFjayBpbiBzZWNvbmRzLiBmbG9hdC5cclxuXHJcblx0cGF1c2VkIDogdHJ1ZSxcclxuXHR2ZXJzaW9uOid2ZXI6IEInLFxyXG5cdHBpY3MgOiB7fSwgIyAxMiBwasOkc2VyXHJcblx0YnV0dG9ucyA6IFtdLFxyXG5cclxuXHRzaXplOm51bGwsICMgZW4gcnV0YXMgc3Rvcmxla1xyXG5cdHNldFNpemU6bnVsbCwgXHJcblx0bXg6bnVsbCwgIyB4LW1hcmdpbmFsXHJcblx0c2V0TXg6bnVsbCxcclxuXHRteTpudWxsLCAjIHktbWFyZ2luYWxcclxuXHRzZXRNeTpudWxsLFxyXG5cdHRleHRhcmVhOm51bGwsXHJcblx0Y29weVBHTlRvQ2xpcGJvYXJkOiAoKSAtPlxyXG5cdFx0YXJyID0gZ2xvYmFsLmNoZXNzLnBnbigpLnNwbGl0ICcgJ1xyXG5cdFx0Zm9yIGkgaW4gcmFuZ2UgYXJyLmxlbmd0aFxyXG5cdFx0XHRhcnJbaV0gKz0gaWYgaSUzPT0yIHRoZW4gXCJcXG5cIiBlbHNlIFwiIFwiXHJcblx0XHRcclxuXHRcdHRleHRhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ3BnbidcclxuXHRcdCN0ZXh0YXJlYS5oaWRkZW4gPSBmYWxzZVxyXG5cdFx0dGV4dGFyZWEudmFsdWUgPSBhcnIuam9pbignJykudHJpbSgpXHJcblx0XHR0ZXh0YXJlYS5zZWxlY3QoKVxyXG5cdFx0ZG9jdW1lbnQuZXhlY0NvbW1hbmQgJ2NvcHknXHJcblx0XHQjdGV4dGFyZWEuYmx1cigpXHJcblxyXG5cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjb29yZHMgPSAodWNpKSA9PlxyXG5cdHBhcmFtLlN0cmluZyB1Y2lcclxuXHRjMCA9IFwiYWJjZGVmZ2hcIi5pbmRleE9mIHVjaVswXVxyXG5cdHIwID0gXCIxMjM0NTY3OFwiLmluZGV4T2YgdWNpWzFdXHJcblx0YzEgPSBcImFiY2RlZmdoXCIuaW5kZXhPZiB1Y2lbMl1cclxuXHRyMSA9IFwiMTIzNDU2NzhcIi5pbmRleE9mIHVjaVszXVxyXG5cdHBhcmFtLkFycmF5IFtjMCs4KnIwLCBjMSs4KnIxXVxyXG5hc3MgWzgsMjRdLCBjb29yZHMgXCJhMmE0XCJcclxuXHJcbmV4cG9ydCB0b1VDSSA9IChbZnJvbSx0b10pID0+XHJcblx0cGFyYW0uSW50ZWdlciBmcm9tXHJcblx0cGFyYW0uSW50ZWdlciB0b1xyXG5cdGMwID0gXCJhYmNkZWZnaFwiW2Zyb20lOF1cclxuXHRyMCA9IFwiMTIzNDU2NzhcIltmcm9tLy84XVxyXG5cdGMxID0gXCJhYmNkZWZnaFwiW3RvJThdXHJcblx0cjEgPSBcIjEyMzQ1Njc4XCJbdG8vLzhdXHJcblx0cGFyYW0uU3RyaW5nIGMwK3IwK2MxK3IxXHJcbmFzcyBcImUyZTRcIiwgdG9VQ0kgWzEyLDI4XVxyXG5cclxuZXhwb3J0IHRvT2JqZWN0Tm90YXRpb24gPSAoW2Zyb20sdG9dKSA9PlxyXG5cdHBhcmFtLkludGVnZXIgZnJvbVxyXG5cdHBhcmFtLkludGVnZXIgdG9cclxuXHR1Y2kgPSB0b1VDSSBbZnJvbSx0b11cclxuXHRmcm9tID0gdWNpLnNsaWNlIDAsMlxyXG5cdHRvID0gdWNpLnNsaWNlIDIsNFxyXG5cdHBhcmFtLk9iamVjdCB7ZnJvbSwgdG99XHJcbmFzcyB7ZnJvbTonZTInLCB0bzonZTQnfSwgdG9PYmplY3ROb3RhdGlvbiBbMTIsMjhdXHJcblxyXG5leHBvcnQgZW1wdHkgPSAobikgPT5cclxuXHRwYXJhbS5JbnRlZ2VyIG5cclxuXHRwYXJhbS5TdHJpbmcgKDErbi8vOCkudG9TdHJpbmcoKVxyXG5cclxuZXhwb3J0IGR1bXBTdGF0ZSA9ID0+XHJcblx0Y29uc29sZS5sb2cgJ1NUQVRFICMjIyMjIyMjJ1xyXG5cdCMgY29uc29sZS5sb2cgJyAgc3RhY2snLGdsb2JhbC5zdGFja1xyXG5cdGNvbnNvbGUubG9nICcgIGN1cnJOb2RlJyxnbG9iYWwuY3Vyck5vZGVcclxuXHRjb25zb2xlLmxvZyAnICBoaXN0b3J5JyxnbG9iYWwuY2hlc3MuaGlzdG9yeSgpXHJcblxyXG5saW5rID0gPT4gJ2h0dHBzOi8vbGljaGVzcy5vcmcvYW5hbHlzaXMvJyArIGdsb2JhbC5jaGVzcy5mZW4oKVxyXG4iXX0=
//# sourceURL=c:\github\2023\026-chessx2\coffee\globals.coffee