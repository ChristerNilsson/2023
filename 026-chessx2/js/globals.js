// Generated by CoffeeScript 2.7.0
var link;

import {
  ass,
  log,
  range,
  split,
  param,
  hexToBase64,
  spaceShip
} from '../js/utils.js';

import {
  Button
} from '../js/button.js';

import _ from 'https://cdn.skypack.dev/lodash';

export var global = {
  dialogues: [], // dialogstack till menyhanteringen
  board0: null,
  board1: null,
  chess: null, // hanterar dragen samt deras legalitet
  minutes: 15,
  increment: 10, // seconds
  clocks: [
    15 * 60 + 10,
    15 * 60 + 10 // white and black in seconds. float.
  ],
  paused: true,
  version: 'ver: B',
  pics: {}, // 12 pj√§ser
  buttons: [],
  size: null, // en rutas storlek
  setSize: null,
  mx: null, // x-marginal
  setMx: null,
  my: null, // y-marginal
  setMy: null,
  textarea: null,
  copyPGNToClipboard: function() {
    var arr, i, j, len, ref, textarea;
    arr = global.chess.pgn().split(' ');
    ref = range(arr.length);
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      arr[i] += i % 3 === 2 ? "\n" : " ";
    }
    textarea = document.getElementById('pgn');
    // textarea.hidden = false
    textarea.value = arr.join('').trim();
    textarea.select();
    document.execCommand('copy');
    return textarea.blur();
  }
};

export var coords = (uci) => {
  var c0, c1, r0, r1;
  param.String(uci);
  c0 = "abcdefgh".indexOf(uci[0]);
  r0 = "12345678".indexOf(uci[1]);
  c1 = "abcdefgh".indexOf(uci[2]);
  r1 = "12345678".indexOf(uci[3]);
  return param.Array([c0 + 8 * r0, c1 + 8 * r1]);
};

ass([8, 24], coords("a2a4"));

export var toUCI = ([from, to]) => {
  var c0, c1, r0, r1;
  param.Integer(from);
  param.Integer(to);
  c0 = "abcdefgh"[from % 8];
  r0 = "12345678"[Math.floor(from / 8)];
  c1 = "abcdefgh"[to % 8];
  r1 = "12345678"[Math.floor(to / 8)];
  return param.String(c0 + r0 + c1 + r1);
};

ass("e2e4", toUCI([12, 28]));

export var toObjectNotation = ([from, to]) => {
  var uci;
  param.Integer(from);
  param.Integer(to);
  uci = toUCI([from, to]);
  from = uci.slice(0, 2);
  to = uci.slice(2, 4);
  return param.Object({from, to});
};

ass({
  from: 'e2',
  to: 'e4'
}, toObjectNotation([12, 28]));

export var empty = (n) => {
  param.Integer(n);
  return param.String((1 + Math.floor(n / 8)).toString());
};

export var dumpState = () => {
  console.log('STATE ########');
  // console.log '  stack',global.stack
  console.log('  currNode', global.currNode);
  return console.log('  history', global.chess.history());
};

link = () => {
  return 'https://lichess.org/analysis/' + global.chess.fen();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFscy5qcyIsInNvdXJjZVJvb3QiOiIuLlxcIiwic291cmNlcyI6WyJjb2ZmZWVcXGdsb2JhbHMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBOztBQUFBLE9BQUE7RUFBUSxHQUFSO0VBQVksR0FBWjtFQUFnQixLQUFoQjtFQUFzQixLQUF0QjtFQUE0QixLQUE1QjtFQUFrQyxXQUFsQztFQUE4QyxTQUE5QztDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLE1BQVI7Q0FBQSxNQUFBOztBQUNBLE9BQU8sQ0FBUCxNQUFBOztBQUVBLE9BQUEsSUFBTyxNQUFBLEdBQVM7RUFFZixTQUFBLEVBQVcsRUFGSTtFQUdmLE1BQUEsRUFBUyxJQUhNO0VBSWYsTUFBQSxFQUFTLElBSk07RUFLZixLQUFBLEVBQVEsSUFMTztFQU9mLE9BQUEsRUFBVSxFQVBLO0VBUWYsU0FBQSxFQUFZLEVBUkc7RUFTZixNQUFBLEVBQVE7SUFBQyxFQUFBLEdBQUcsRUFBSCxHQUFNLEVBQVA7SUFBVSxFQUFBLEdBQUcsRUFBSCxHQUFNLEVBQWhCO0dBVE87RUFXZixNQUFBLEVBQVMsSUFYTTtFQVlmLE9BQUEsRUFBUSxRQVpPO0VBYWYsSUFBQSxFQUFPLENBQUEsQ0FiUTtFQWNmLE9BQUEsRUFBVSxFQWRLO0VBZ0JmLElBQUEsRUFBSyxJQWhCVTtFQWlCZixPQUFBLEVBQVEsSUFqQk87RUFrQmYsRUFBQSxFQUFHLElBbEJZO0VBbUJmLEtBQUEsRUFBTSxJQW5CUztFQW9CZixFQUFBLEVBQUcsSUFwQlk7RUFxQmYsS0FBQSxFQUFNLElBckJTO0VBc0JmLFFBQUEsRUFBUyxJQXRCTTtFQXVCZixrQkFBQSxFQUFvQixRQUFBLENBQUEsQ0FBQTtBQUNyQixRQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7SUFBRSxHQUFBLEdBQU0sTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFiLENBQUEsQ0FBa0IsQ0FBQyxLQUFuQixDQUF5QixHQUF6QjtBQUNOO0lBQUEsS0FBQSxxQ0FBQTs7TUFDQyxHQUFHLENBQUMsQ0FBRCxDQUFILElBQWEsQ0FBQSxHQUFFLENBQUYsS0FBSyxDQUFSLEdBQWUsSUFBZixHQUF5QjtJQURwQztJQUdBLFFBQUEsR0FBVyxRQUFRLENBQUMsY0FBVCxDQUF3QixLQUF4QixFQUpiOztJQU1FLFFBQVEsQ0FBQyxLQUFULEdBQWlCLEdBQUcsQ0FBQyxJQUFKLENBQVMsRUFBVCxDQUFZLENBQUMsSUFBYixDQUFBO0lBQ2pCLFFBQVEsQ0FBQyxNQUFULENBQUE7SUFDQSxRQUFRLENBQUMsV0FBVCxDQUFxQixNQUFyQjtXQUNBLFFBQVEsQ0FBQyxJQUFULENBQUE7RUFWbUI7QUF2Qkw7O0FBdUNoQixPQUFBLElBQU8sTUFBQSxHQUFTLENBQUMsR0FBRCxDQUFBLEdBQUE7QUFDaEIsTUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTtFQUFDLEtBQUssQ0FBQyxNQUFOLENBQWEsR0FBYjtFQUNBLEVBQUEsR0FBSyxVQUFVLENBQUMsT0FBWCxDQUFtQixHQUFHLENBQUMsQ0FBRCxDQUF0QjtFQUNMLEVBQUEsR0FBSyxVQUFVLENBQUMsT0FBWCxDQUFtQixHQUFHLENBQUMsQ0FBRCxDQUF0QjtFQUNMLEVBQUEsR0FBSyxVQUFVLENBQUMsT0FBWCxDQUFtQixHQUFHLENBQUMsQ0FBRCxDQUF0QjtFQUNMLEVBQUEsR0FBSyxVQUFVLENBQUMsT0FBWCxDQUFtQixHQUFHLENBQUMsQ0FBRCxDQUF0QjtTQUNMLEtBQUssQ0FBQyxLQUFOLENBQVksQ0FBQyxFQUFBLEdBQUcsQ0FBQSxHQUFFLEVBQU4sRUFBVSxFQUFBLEdBQUcsQ0FBQSxHQUFFLEVBQWYsQ0FBWjtBQU5lOztBQU9oQixHQUFBLENBQUksQ0FBQyxDQUFELEVBQUcsRUFBSCxDQUFKLEVBQVksTUFBQSxDQUFPLE1BQVAsQ0FBWjs7QUFFQSxPQUFBLElBQU8sS0FBQSxHQUFRLENBQUMsQ0FBQyxJQUFELEVBQU0sRUFBTixDQUFELENBQUEsR0FBQTtBQUNmLE1BQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUE7RUFBQyxLQUFLLENBQUMsT0FBTixDQUFjLElBQWQ7RUFDQSxLQUFLLENBQUMsT0FBTixDQUFjLEVBQWQ7RUFDQSxFQUFBLEdBQUssVUFBVSxDQUFDLElBQUEsR0FBSyxDQUFOO0VBQ2YsRUFBQSxHQUFLLFVBQVUsWUFBQyxPQUFNLEVBQVA7RUFDZixFQUFBLEdBQUssVUFBVSxDQUFDLEVBQUEsR0FBRyxDQUFKO0VBQ2YsRUFBQSxHQUFLLFVBQVUsWUFBQyxLQUFJLEVBQUw7U0FDZixLQUFLLENBQUMsTUFBTixDQUFhLEVBQUEsR0FBRyxFQUFILEdBQU0sRUFBTixHQUFTLEVBQXRCO0FBUGM7O0FBUWYsR0FBQSxDQUFJLE1BQUosRUFBWSxLQUFBLENBQU0sQ0FBQyxFQUFELEVBQUksRUFBSixDQUFOLENBQVo7O0FBRUEsT0FBQSxJQUFPLGdCQUFBLEdBQW1CLENBQUMsQ0FBQyxJQUFELEVBQU0sRUFBTixDQUFELENBQUEsR0FBQTtBQUMxQixNQUFBO0VBQUMsS0FBSyxDQUFDLE9BQU4sQ0FBYyxJQUFkO0VBQ0EsS0FBSyxDQUFDLE9BQU4sQ0FBYyxFQUFkO0VBQ0EsR0FBQSxHQUFNLEtBQUEsQ0FBTSxDQUFDLElBQUQsRUFBTSxFQUFOLENBQU47RUFDTixJQUFBLEdBQU8sR0FBRyxDQUFDLEtBQUosQ0FBVSxDQUFWLEVBQVksQ0FBWjtFQUNQLEVBQUEsR0FBSyxHQUFHLENBQUMsS0FBSixDQUFVLENBQVYsRUFBWSxDQUFaO1NBQ0wsS0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUFDLElBQUQsRUFBTyxFQUFQLENBQWI7QUFOeUI7O0FBTzFCLEdBQUEsQ0FBSTtFQUFDLElBQUEsRUFBSyxJQUFOO0VBQVksRUFBQSxFQUFHO0FBQWYsQ0FBSixFQUEwQixnQkFBQSxDQUFpQixDQUFDLEVBQUQsRUFBSSxFQUFKLENBQWpCLENBQTFCOztBQUVBLE9BQUEsSUFBTyxLQUFBLEdBQVEsQ0FBQyxDQUFELENBQUEsR0FBQTtFQUNkLEtBQUssQ0FBQyxPQUFOLENBQWMsQ0FBZDtTQUNBLEtBQUssQ0FBQyxNQUFOLENBQWEsQ0FBQyxDQUFBLGNBQUUsSUFBRyxFQUFOLENBQVEsQ0FBQyxRQUFULENBQUEsQ0FBYjtBQUZjOztBQUlmLE9BQUEsSUFBTyxTQUFBLEdBQVksQ0FBQSxDQUFBLEdBQUE7RUFDbEIsT0FBTyxDQUFDLEdBQVIsQ0FBWSxnQkFBWixFQUFEOztFQUVDLE9BQU8sQ0FBQyxHQUFSLENBQVksWUFBWixFQUF5QixNQUFNLENBQUMsUUFBaEM7U0FDQSxPQUFPLENBQUMsR0FBUixDQUFZLFdBQVosRUFBd0IsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFiLENBQUEsQ0FBeEI7QUFKa0I7O0FBTW5CLElBQUEsR0FBTyxDQUFBLENBQUEsR0FBQTtTQUFHLCtCQUFBLEdBQWtDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBYixDQUFBO0FBQXJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthc3MsbG9nLHJhbmdlLHNwbGl0LHBhcmFtLGhleFRvQmFzZTY0LHNwYWNlU2hpcH0gZnJvbSAnLi4vanMvdXRpbHMuanMnXHJcbmltcG9ydCB7QnV0dG9ufSBmcm9tICcuLi9qcy9idXR0b24uanMnXHJcbmltcG9ydCBfIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2xvZGFzaCdcclxuXHJcbmV4cG9ydCBnbG9iYWwgPSB7XHJcblxyXG5cdGRpYWxvZ3VlczogW10sICMgZGlhbG9nc3RhY2sgdGlsbCBtZW55aGFudGVyaW5nZW5cclxuXHRib2FyZDAgOiBudWxsLFxyXG5cdGJvYXJkMSA6IG51bGwsXHJcblx0Y2hlc3MgOiBudWxsLCAjIGhhbnRlcmFyIGRyYWdlbiBzYW10IGRlcmFzIGxlZ2FsaXRldFxyXG5cclxuXHRtaW51dGVzIDogMTUsXHJcblx0aW5jcmVtZW50IDogMTAsICMgc2Vjb25kc1xyXG5cdGNsb2NrczogWzE1KjYwKzEwLDE1KjYwKzEwXSwgIyB3aGl0ZSBhbmQgYmxhY2sgaW4gc2Vjb25kcy4gZmxvYXQuXHJcblxyXG5cdHBhdXNlZCA6IHRydWUsXHJcblx0dmVyc2lvbjondmVyOiBCJyxcclxuXHRwaWNzIDoge30sICMgMTIgcGrDpHNlclxyXG5cdGJ1dHRvbnMgOiBbXSxcclxuXHJcblx0c2l6ZTpudWxsLCAjIGVuIHJ1dGFzIHN0b3JsZWtcclxuXHRzZXRTaXplOm51bGwsIFxyXG5cdG14Om51bGwsICMgeC1tYXJnaW5hbFxyXG5cdHNldE14Om51bGwsXHJcblx0bXk6bnVsbCwgIyB5LW1hcmdpbmFsXHJcblx0c2V0TXk6bnVsbCxcclxuXHR0ZXh0YXJlYTpudWxsLFxyXG5cdGNvcHlQR05Ub0NsaXBib2FyZDogKCkgLT5cclxuXHRcdGFyciA9IGdsb2JhbC5jaGVzcy5wZ24oKS5zcGxpdCAnICdcclxuXHRcdGZvciBpIGluIHJhbmdlIGFyci5sZW5ndGhcclxuXHRcdFx0YXJyW2ldICs9IGlmIGklMz09MiB0aGVuIFwiXFxuXCIgZWxzZSBcIiBcIlxyXG5cdFx0XHJcblx0XHR0ZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICdwZ24nXHJcblx0XHQjIHRleHRhcmVhLmhpZGRlbiA9IGZhbHNlXHJcblx0XHR0ZXh0YXJlYS52YWx1ZSA9IGFyci5qb2luKCcnKS50cmltKClcclxuXHRcdHRleHRhcmVhLnNlbGVjdCgpXHJcblx0XHRkb2N1bWVudC5leGVjQ29tbWFuZCAnY29weSdcclxuXHRcdHRleHRhcmVhLmJsdXIoKVxyXG5cclxuXHJcblxyXG59XHJcblxyXG5leHBvcnQgY29vcmRzID0gKHVjaSkgPT5cclxuXHRwYXJhbS5TdHJpbmcgdWNpXHJcblx0YzAgPSBcImFiY2RlZmdoXCIuaW5kZXhPZiB1Y2lbMF1cclxuXHRyMCA9IFwiMTIzNDU2NzhcIi5pbmRleE9mIHVjaVsxXVxyXG5cdGMxID0gXCJhYmNkZWZnaFwiLmluZGV4T2YgdWNpWzJdXHJcblx0cjEgPSBcIjEyMzQ1Njc4XCIuaW5kZXhPZiB1Y2lbM11cclxuXHRwYXJhbS5BcnJheSBbYzArOCpyMCwgYzErOCpyMV1cclxuYXNzIFs4LDI0XSwgY29vcmRzIFwiYTJhNFwiXHJcblxyXG5leHBvcnQgdG9VQ0kgPSAoW2Zyb20sdG9dKSA9PlxyXG5cdHBhcmFtLkludGVnZXIgZnJvbVxyXG5cdHBhcmFtLkludGVnZXIgdG9cclxuXHRjMCA9IFwiYWJjZGVmZ2hcIltmcm9tJThdXHJcblx0cjAgPSBcIjEyMzQ1Njc4XCJbZnJvbS8vOF1cclxuXHRjMSA9IFwiYWJjZGVmZ2hcIlt0byU4XVxyXG5cdHIxID0gXCIxMjM0NTY3OFwiW3RvLy84XVxyXG5cdHBhcmFtLlN0cmluZyBjMCtyMCtjMStyMVxyXG5hc3MgXCJlMmU0XCIsIHRvVUNJIFsxMiwyOF1cclxuXHJcbmV4cG9ydCB0b09iamVjdE5vdGF0aW9uID0gKFtmcm9tLHRvXSkgPT5cclxuXHRwYXJhbS5JbnRlZ2VyIGZyb21cclxuXHRwYXJhbS5JbnRlZ2VyIHRvXHJcblx0dWNpID0gdG9VQ0kgW2Zyb20sdG9dXHJcblx0ZnJvbSA9IHVjaS5zbGljZSAwLDJcclxuXHR0byA9IHVjaS5zbGljZSAyLDRcclxuXHRwYXJhbS5PYmplY3Qge2Zyb20sIHRvfVxyXG5hc3Mge2Zyb206J2UyJywgdG86J2U0J30sIHRvT2JqZWN0Tm90YXRpb24gWzEyLDI4XVxyXG5cclxuZXhwb3J0IGVtcHR5ID0gKG4pID0+XHJcblx0cGFyYW0uSW50ZWdlciBuXHJcblx0cGFyYW0uU3RyaW5nICgxK24vLzgpLnRvU3RyaW5nKClcclxuXHJcbmV4cG9ydCBkdW1wU3RhdGUgPSA9PlxyXG5cdGNvbnNvbGUubG9nICdTVEFURSAjIyMjIyMjIydcclxuXHQjIGNvbnNvbGUubG9nICcgIHN0YWNrJyxnbG9iYWwuc3RhY2tcclxuXHRjb25zb2xlLmxvZyAnICBjdXJyTm9kZScsZ2xvYmFsLmN1cnJOb2RlXHJcblx0Y29uc29sZS5sb2cgJyAgaGlzdG9yeScsZ2xvYmFsLmNoZXNzLmhpc3RvcnkoKVxyXG5cclxubGluayA9ID0+ICdodHRwczovL2xpY2hlc3Mub3JnL2FuYWx5c2lzLycgKyBnbG9iYWwuY2hlc3MuZmVuKClcclxuIl19
//# sourceURL=c:\github\2023\026-chessx2\coffee\globals.coffee